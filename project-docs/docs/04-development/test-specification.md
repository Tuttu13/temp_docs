---
sidebar_position: 4
---

# テスト仕様書（テストケース）

## 📌 概要
入力値・期待結果・判定条件を定義するドキュメントです。

## 🧪 テストケース一覧

### ユーザー認証機能

#### TC-AUTH-001: ログイン成功

| 項目 | 内容 |
|------|------|
| **テストID** | TC-AUTH-001 |
| **テスト名** | 正しい認証情報でのログイン成功 |
| **優先度** | 高 |
| **前提条件** | ユーザーが登録済み |
| **テストデータ** | email: `test@example.com`, password: `Password123!` |

**テスト手順**:
1. ログインページにアクセス
2. メールアドレスを入力: `test@example.com`
3. パスワードを入力: `Password123!`
4. ログインボタンをクリック

**期待結果**:
- ダッシュボードにリダイレクトされる
- ユーザー名が表示される
- JWTトークンがlocalStorageに保存される

**実際の結果**:

**ステータス**: □ Pass □ Fail □ Blocked

---

#### TC-AUTH-002: ログイン失敗（不正なパスワード）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-AUTH-002 |
| **テスト名** | 不正なパスワードでのログイン失敗 |
| **優先度** | 高 |
| **前提条件** | ユーザーが登録済み |
| **テストデータ** | email: `test@example.com`, password: `WrongPassword` |

**テスト手順**:
1. ログインページにアクセス
2. メールアドレスを入力: `test@example.com`
3. 誤ったパスワードを入力: `WrongPassword`
4. ログインボタンをクリック

**期待結果**:
- エラーメッセージ表示: 「メールアドレスまたはパスワードが正しくありません」
- ログインページに留まる
- トークンが保存されない

**実際の結果**:

**ステータス**: □ Pass □ Fail □ Blocked

---

#### TC-AUTH-003: バリデーションエラー

| 項目 | 内容 |
|------|------|
| **テストID** | TC-AUTH-003 |
| **テスト名** | 入力値バリデーションエラー |
| **優先度** | 中 |
| **前提条件** | なし |

**テストパターン**:

| No | メールアドレス | パスワード | 期待エラー |
|----|--------------|----------|----------|
| 1 | (空欄) | Password123! | メールアドレスは必須です |
| 2 | invalid-email | Password123! | 有効なメールアドレスを入力してください |
| 3 | test@example.com | (空欄) | パスワードは必須です |
| 4 | test@example.com | 123 | パスワードは8文字以上必要です |

**ステータス**: □ Pass □ Fail □ Blocked

---

### 投稿機能

#### TC-POST-001: 投稿作成成功

| 項目 | 内容 |
|------|------|
| **テストID** | TC-POST-001 |
| **テスト名** | 投稿の新規作成 |
| **優先度** | 高 |
| **前提条件** | ログイン済み |
| **テストデータ** | title: `テスト投稿`, content: `投稿内容`, category_id: `1` |

**テスト手順**:
1. 投稿作成ページにアクセス
2. タイトルを入力: `テスト投稿`
3. 本文を入力: `投稿内容`
4. カテゴリを選択: `技術`
5. 「投稿する」ボタンをクリック

**期待結果**:
- 成功メッセージ表示: 「投稿を作成しました」
- 投稿詳細ページにリダイレクト
- 投稿内容が正しく表示される
- データベースに投稿が保存される

**実際の結果**:

**ステータス**: □ Pass □ Fail □ Blocked

---

#### TC-POST-002: 投稿一覧表示

| 項目 | 内容 |
|------|------|
| **テストID** | TC-POST-002 |
| **テスト名** | 投稿一覧のページネーション |
| **優先度** | 中 |
| **前提条件** | 投稿が25件以上存在 |

**テスト手順**:
1. 投稿一覧ページにアクセス
2. 1ページ目の表示を確認
3. 「次へ」ボタンをクリック
4. 2ページ目の表示を確認

**期待結果**:
- 1ページに10件表示される
- ページネーションが正しく動作する
- 各投稿のタイトル、著者、作成日が表示される

**実際の結果**:

**ステータス**: □ Pass □ Fail □ Blocked

---

#### TC-POST-003: 投稿編集（権限あり）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-POST-003 |
| **テスト名** | 自分の投稿を編集 |
| **優先度** | 高 |
| **前提条件** | 自分の投稿が存在 |

**テスト手順**:
1. 自分の投稿詳細ページにアクセス
2. 「編集」ボタンをクリック
3. タイトルを変更: `更新されたタイトル`
4. 「保存」ボタンをクリック

**期待結果**:
- 成功メッセージ表示: 「投稿を更新しました」
- 更新内容が反映される
- `updated_at`が更新される

**実際の結果**:

**ステータス**: □ Pass □ Fail □ Blocked

---

#### TC-POST-004: 投稿編集（権限なし）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-POST-004 |
| **テスト名** | 他人の投稿を編集しようとする |
| **優先度** | 高 |
| **前提条件** | 他人の投稿が存在 |

**テスト手順**:
1. 他人の投稿詳細ページにアクセス
2. 「編集」ボタンの有無を確認
3. URLを直接編集して編集ページにアクセス試行

**期待結果**:
- 「編集」ボタンが表示されない
- 直接アクセス時は403エラー
- エラーメッセージ表示: 「この操作を行う権限がありません」

**実際の結果**:

**ステータス**: □ Pass □ Fail □ Blocked

---

### API テストケース

#### TC-API-001: GET /api/users

| 項目 | 内容 |
|------|------|
| **テストID** | TC-API-001 |
| **テスト名** | ユーザー一覧取得API |
| **メソッド** | GET |
| **エンドポイント** | `/api/users` |
| **認証** | 必要 |

**リクエスト例**:
```http
GET /api/users?page=1&limit=10
Authorization: Bearer {token}
```

**期待レスポンス (200 OK)**:
```json
{
  "data": [
    {
      "id": 1,
      "name": "Test User",
      "email": "test@example.com",
      "created_at": "2025-01-01T00:00:00Z"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 10,
    "total": 100,
    "total_pages": 10
  }
}
```

**テストパターン**:

| No | パラメータ | 期待ステータス | 備考 |
|----|----------|--------------|------|
| 1 | page=1&limit=10 | 200 | 正常ケース |
| 2 | page=0&limit=10 | 400 | ページは1以上 |
| 3 | page=1&limit=101 | 400 | limitは最大100 |
| 4 | 認証なし | 401 | 未認証 |

**ステータス**: □ Pass □ Fail □ Blocked

---

#### TC-API-002: POST /api/posts

| 項目 | 内容 |
|------|------|
| **テストID** | TC-API-002 |
| **テスト名** | 投稿作成API |
| **メソッド** | POST |
| **エンドポイント** | `/api/posts` |
| **認証** | 必要 |

**リクエスト例**:
```http
POST /api/posts
Authorization: Bearer {token}
Content-Type: application/json

{
  "title": "Test Post",
  "content": "Post content",
  "category_id": 1
}
```

**期待レスポンス (201 Created)**:
```json
{
  "id": 123,
  "title": "Test Post",
  "content": "Post content",
  "category_id": 1,
  "user_id": 1,
  "created_at": "2025-11-09T00:00:00Z",
  "updated_at": "2025-11-09T00:00:00Z"
}
```

**バリデーションテスト**:

| No | title | content | category_id | 期待ステータス | エラーメッセージ |
|----|-------|---------|------------|--------------|----------------|
| 1 | (空欄) | "content" | 1 | 400 | タイトルは必須です |
| 2 | "a" | "content" | 1 | 400 | タイトルは3文字以上必要です |
| 3 | "title" | (空欄) | 1 | 400 | 本文は必須です |
| 4 | "title" | "content" | 999 | 400 | 存在しないカテゴリです |

**ステータス**: □ Pass □ Fail □ Blocked

---

### 性能テスト

#### TC-PERF-001: ページ読み込み時間

| 項目 | 内容 |
|------|------|
| **テストID** | TC-PERF-001 |
| **テスト名** | トップページ読み込み性能 |
| **測定指標** | First Contentful Paint (FCP) |
| **目標値** | 2秒以内 |

**テスト条件**:
- ネットワーク: Fast 3G
- デバイス: デスクトップ
- 測定回数: 10回
- 測定ツール: Lighthouse

**期待結果**:
- FCP: 2秒以内
- LCP: 2.5秒以内
- TTI: 3.5秒以内

**実際の結果**:

**ステータス**: □ Pass □ Fail □ Blocked

---

#### TC-PERF-002: API応答時間

| 項目 | 内容 |
|------|------|
| **テストID** | TC-PERF-002 |
| **テスト名** | GET /api/posts 応答時間 |
| **測定指標** | レスポンスタイム |
| **目標値** | 500ms以内（95パーセンタイル） |

**負荷条件**:
- 同時ユーザー数: 100
- リクエスト総数: 10,000
- ツール: k6

**期待結果**:
```
http_req_duration:
  avg: < 300ms
  p95: < 500ms
  p99: < 1000ms
```

**実際の結果**:

**ステータス**: □ Pass □ Fail □ Blocked

---

## 📊 テスト実行記録

### テストサマリー

| 日付 | 実行者 | 総数 | 合格 | 不合格 | ブロック | 合格率 |
|------|--------|------|------|--------|---------|--------|
| 2025-11-09 |  |  |  |  |  |  |

### バグ一覧

| バグID | 発見日 | 重要度 | 概要 | ステータス |
|--------|--------|--------|------|----------|
|        |        |        |      |          |

## 📝 備考

### テストケース追加基準
- 新機能追加時は必ずテストケースを追加
- バグ修正時は再現テストケースを追加
- 定期的にテストケースをレビュー・更新

